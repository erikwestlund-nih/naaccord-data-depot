---
all:
  children:
    services:
      hosts:
        mrpznaaccorddb01.hosts.jhmi.edu:
          ansible_host: 10.150.96.37
          wireguard_ip: 10.100.0.11
          docker_compose_profiles:
            - services

    web:
      hosts:
        mrpznaaccordweb01.hosts.jhmi.edu:
          ansible_host: 10.150.96.6
          wireguard_ip: 10.100.0.10
          docker_compose_profiles:
            - web

  vars:
    naaccord_environment: production
    domain: mrpznaaccordweb01.hosts.jhmi.edu
    services_server_host: mrpznaaccorddb01.hosts.jhmi.edu

    # NAS Configuration (Ansible-managed for production)
    nas_type: samba  # Ansible manages mount with correct uid/gid
    nas_host: cloud.nas.jh.edu
    nas_share: na-accord$
    nas_mount_point: /na_accord_nas  # Confirmed by IT 2025-10-03
    nas_mount_options: "dir_mode=0775,file_mode=0775,uid=1000,gid=1000,vers=3"
    nas_username: "{{ vault_nas_username }}"  # From vault
    nas_password: "{{ vault_nas_password }}"  # From vault
    nas_domain: "{{ vault_nas_domain }}"      # From vault
    # Currently 100GB, expandable to 200GB

    # SAML Configuration (JHU Shibboleth for production)
    # Metadata deployed from template (roles/saml/templates/idp_metadata.xml.j2)
    saml_sp_entity_id: "https://{{ domain }}"
    saml_sp_acs_url: "https://{{ domain }}/saml2/acs/"
    # Entity ID: https://login.jh.edu/idp/shibboleth
    # SSO URL: https://login.jh.edu/idp/profile/SAML2/Redirect/SSO

    # SSL Configuration (deployed from Ansible vault)
    # Production web server directly accepts HTTPS on port 443
    # Certificates stored in vault and deployed by Ansible
    ssl_provider: manual  # Manual = vault-deployed certificates
    ssl_enabled: true     # Production handles SSL directly (no proxy)
    ssl_cert_path: "/etc/ssl/certs/naaccord/naaccord.crt"
    ssl_key_path: "/etc/ssl/private/naaccord/naaccord.key"
    ssl_chain_path: "/etc/ssl/certs/naaccord/ca-bundle.crt"
